(this["webpackJsonpchat-ui"]=this["webpackJsonpchat-ui"]||[]).push([[0],{141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(40),i=a.n(r),o=a(52),s=a.n(o),l=a(82),u=a(67),d=a(10),j=a(102),b=a(197),h=a(101),m=a(36),p=a(180),x=a(195),O=a(196),f=a(198),g=a(190),k=a(199),v=a(191),y=a(193),w=a(200),S=a(194),C=a(100),F=a.n(C),_=a(98),E=a.n(_),T=a(99),A=a.n(T),D=a.p+"static/media/gen.f60a9fed.png",W=a.p+"static/media/kohaku.b690fcd4.png",B=a.p+"static/media/senku.de65e8bb.png",L=a.p+"static/media/suika.09055d21.png",z=a.p+"static/media/tsukasa.b4ce7476.png",P="https://ishigami-chat.herokuapp.com/";function I(){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(P,{method:"GET"});case 3:if((t=e.sent).ok){e.next=7;break}throw console.debug(JSON.stringify(t)),new Error("Received error from server: ".concat(t.statusText));case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),console.error("Error connecting to server: ".concat(e.t0)),new Error(e.t0);case 13:console.debug("Server is up.");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var N=a(95),G=a.n(N),H=a(2),K="https://ishigami-chat.herokuapp.com/",R={gen:D,kohaku:W,senku:B,suika:L,tsukasa:z};var M=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),i=Object(d.a)(r,2),o=i[0],C=i[1],_=Object(n.useState)([]),T=Object(d.a)(_,2),D=T[0],W=T[1],B=Object(n.useState)(null),L=Object(d.a)(B,2),z=L[0],P=L[1],J=Object(n.useState)("none"),N=Object(d.a)(J,2),M=N[0],q=N[1],Q=Object(n.useState)(!1),U=Object(d.a)(Q,2),V=U[0],X=U[1],Y=Object(m.a)(),Z=Object(p.a)(Y.breakpoints.up("sm")),$=Object(j.a)({palette:{mode:"dark",background:{default:"#383838"},primary:{light:"#63A52F",main:"#63A52F",dark:"#63A52F",contrastText:"#FFFFFF"}}});Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:(t=Object(h.a)(K,{})).on("user-joined",(function(){W((function(e){return e.concat({message:"Someone joined the chat room.",time:new Date})}))})),t.on("user-left",(function(){W((function(e){return e.concat({message:"Someone left the chat room.",time:new Date})}))})),t.on("chat-message",(function(e){W((function(t){var a;return t.concat(Object(l.a)(Object(l.a)({},e),{},{time:new Date,display_name:null!==(a=e.display_name)&&void 0!==a?a:"Anonymous"}))}))})),c(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var ee=function(){""!==o.trim()&&(C(""),a.emit("chat-message",{message:o,display_name:z,avatar_key:"none"===M?null:M}))};return a?Object(H.jsxs)(b.a,{theme:$,children:[Object(H.jsxs)(x.a,{container:!0,direction:"column",style:{position:"absolute",bottom:0,paddingBottom:25,paddingRight:25,paddingLeft:25,backgroundColor:$.palette.background.default},children:[Object(H.jsx)(x.a,{item:!0,children:Object(H.jsx)(x.a,{container:!0,direction:"column",children:D.map((function(e){var t;return Object(H.jsx)(x.a,{item:!0,children:Object(H.jsxs)(x.a,{container:!0,direction:"row",sx:{py:2},wrap:"nowrap",children:[e.display_name?Object(H.jsx)(x.a,{item:!0,children:e.avatar_key?Object(H.jsx)(O.a,{alt:e.display_name,sx:{mr:1},src:R[e.avatar_key]}):Object(H.jsx)(O.a,{alt:e.display_name,sx:{mr:1},children:e.display_name.charAt(0)})}):Object(H.jsx)(x.a,{item:!0,children:Object(H.jsx)(O.a,{variant:"rounded",alt:"Info",sx:{mr:1,backgroundColor:"lightgray"},children:Object(H.jsx)(E.a,{})})}),Object(H.jsx)(x.a,{item:!0,children:Object(H.jsxs)(x.a,{container:!0,direction:"column",children:[Object(H.jsxs)(x.a,{item:!0,children:[Object(H.jsx)(f.a,{fontSize:14,fontWeight:"bold",lineHeight:"1rem",display:"inline",gutterBottom:!0,color:$.palette.text.primary,children:null!==(t=e.display_name)&&void 0!==t?t:"System"}),e.time&&Object(H.jsx)(g.a,{title:e.time.toLocaleString(),placement:"top",arrow:!0,children:Object(H.jsxs)(f.a,{fontSize:10,fontWeight:"light",lineHeight:"1rem",display:"inline",gutterBottom:!0,color:$.palette.text.secondary,children:["\xa0 \xa0",e.time.toLocaleTimeString([],{hour:"numeric",minute:"numeric"})]})})]}),Object(H.jsx)(x.a,{item:!0,children:Object(H.jsx)(f.a,{variant:"body2",color:$.palette.text.primary,children:e.message})})]})})]})})}))})}),Object(H.jsx)(x.a,{item:!0,children:Object(H.jsxs)(x.a,{container:!0,direction:"row",children:[Object(H.jsx)(x.a,{item:!0,style:{display:"flex"},children:Object(H.jsx)(g.a,{title:"Edit Profile",placement:"top",arrow:!0,children:Object(H.jsx)(k.a,{onClick:function(){return X(!0)},variant:"outlined",children:Object(H.jsx)(A.a,{})})})}),Object(H.jsx)(x.a,{item:!0,sx:{flex:1,pl:1},children:Object(H.jsx)(v.a,{onChange:function(e){return C(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&ee()},value:o,autoFocus:!0,placeholder:"Chat with the village...",fullWidth:!0})}),Object(H.jsx)(x.a,{item:!0,style:{display:"flex"},children:Object(H.jsx)(k.a,{onClick:ee,variant:"contained",children:Object(H.jsx)(F.a,{})})})]})})]}),Object(H.jsx)(y.a,{open:V,onClose:function(){return X(!1)},children:Object(H.jsxs)(w.a,{sx:{boxSizing:"border-box",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:Z?400:"90%",bgcolor:$.palette.background.default,boxShadow:24,p:4},children:[Object(H.jsx)(f.a,{variant:"h6",sx:{mb:2},color:$.palette.text.primary,children:"Profile"}),Object(H.jsx)(v.a,{label:"Display Name",onChange:function(e){return P(e.target.value)},value:z,fullWidth:!0,variant:"outlined",margin:"normal"}),Object(H.jsxs)(v.a,{label:"Avatar",onChange:function(e){return q(e.target.value)},value:M,fullWidth:!0,variant:"outlined",margin:"normal",select:!0,children:[Object(H.jsx)(S.a,{value:"none",children:"None"},0),Object(H.jsx)(S.a,{value:"senku",children:"Senku"},1),Object(H.jsx)(S.a,{value:"suika",children:"Suika"},2),Object(H.jsx)(S.a,{value:"gen",children:"Gen"},3),Object(H.jsx)(S.a,{value:"kohaku",children:"Kohaku"},4),Object(H.jsx)(S.a,{value:"tsukasa",children:"Tsukasa"},5)]}),Object(H.jsx)(k.a,{onClick:function(){return X(!1)},variant:"contained",size:"large",sx:{mt:2},fullWidth:!0,children:"Confirm"})]})})]}):Object(H.jsx)(G.a,{loading:!0,background:$.palette.background.default,loaderColor:$.palette.primary.main})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,201)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};a(137),a(138),a(139),a(140),a(141);i.a.render(Object(H.jsx)(c.a.StrictMode,{children:Object(H.jsx)(M,{})}),document.getElementById("root")),q()}},[[142,1,2]]]);
//# sourceMappingURL=main.dfd37bd5.chunk.js.map